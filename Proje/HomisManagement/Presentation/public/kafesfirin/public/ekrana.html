<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head> 
	<link rel="stylesheet" href="../css/ekrana.css">
 	<link rel="stylesheet" href="../css/bootstrap3.css">
	<script src="../script/jquery-1.11.1.min.js" type="text/javascript"></script>
	<script src="../script/jquery.velocity.min.js" type="text/javascript"></script>
	<script src="../script/velocity.ui.min.js" type="text/javascript"></script>
	<script src="../script/bootstrap3.js" type="text/javascript"></script>
	<script type="text/javascript" src="../script/logger.js"></script>
</head>
<body>
<div id="content-container">
   <div id="text">
				<table style="table-layout:fixed;">
					<tr>
						<td class="header">	SOĞUK iÇEÇEKLER</td>
						<td id="header_image">	</td>
					</tr>
				</table>

				<div style="width:37%;height:100%;">
					 <div class="leftmenu" style="top:30px">
							<div class="menuitemheader" style="position:relative;"  >FRAPPE</div>
							<ul class="menuitem">
								<li class="drink">Caramel Frappe</li>
								<li class="item small">9.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul> 

							<ul class="menuitem">
								<li class="drink">Mocha Frappe</li>
								<li class="item small">9.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul> 

							<ul class="menuitem">
								<li class="drink">Espresso Frappe</li>
								<li class="item small">9.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul class="menuitem">
					</div>
					<div class="leftmenu">
							<div class="menuitemheader" style="position:relative;" >SMOOTHIE</div>
							<ul class="menuitem">
								<li class="drink">Karaorman Smoothie</li>
								<li class="item small">9.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul> 

							<ul class="menuitem">
								<li class="drink">Mango Smoothie</li>
								<li class="item small">9.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul> 

							<ul class="menuitem">
								<li class="drink">Yoğurtlu Smoothie</li>
								<li class="item small">9.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul>
							 
								<p style="width:360px;">(Çilek,Mix Berry,Şeftali)</p>
							 
					</div>
					<div class="leftmenu">
							<div class="menuitemheader" style="position:relative;" >FROZEN</div>
							<ul class="menuitem">
								<li class="drink">Çilek Frozen</li>
								<li class="item small">8.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul> 

							<ul class="menuitem">
								<li class="drink">Şeftali Frozen</li>
								<li class="item small">8.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul> 

							<ul class="menuitem">
								<li class="drink">Elma Frozen</li>
								<li class="item small">8.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul>
					</div>					
			 </div>
			 <div style="left:625px;width:29%;height:100%">
						
					<div id="milkshake"style="width:100%;height:24%;position:relative;top:30px">
							<div class="menuitemheader" style="position:relative;" >MILKSHAKE</div>
							<ul class="menuitem">
								<li class="drink">Çilek</li>
								<li class="item small" style="left: -40px;">9.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul> 

							<ul class="menuitem">
								<li class="drink">Çikolata</li>
								<li class="item small" style="left: -40px;">9.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul> 
					</div>
					<div style="width:100%;position:relative;">
							<div class="menuitemheader" style="position:relative;">OVERICE</div>
							<ul class="menuitem">
								<li class="drink">Ice Latte</li>
								<li class="item small" style="left: -40px;">8.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul> 

							<ul class="menuitem">
								<li class="drink">Ice Black Mocha</li>
								<li class="item small" style="left: -40px;">8.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul> 
							<ul class="menuitem">
								<li class="drink">Ice White Mocha</li>
								<li class="item small" style="left: -40px;">8.<span class="smalltext">00</span>&nbsp ₺</li>
							</ul> 
					</div>
					

				 
			 </div>
			 <div id="right_bottom_image" ></div>
		 	
  </div>
 <div id="right">
  <img class="right-image active" src="../media/2_ekran_1_gorsel.jpg" />
  <img class="right-image" src="../media/2_ekran_2_gorsel.jpg" />
  <img class="right-image" src="../media/2_ekran_3_gorsel.jpg" />
  <img class="right-image" src="../media/2_ekran_4_gorsel.jpg" />
 </div>
</div>
  <!-- ChangeText Dialog -->
  <div class="modal" id="textConfigModal" role="dialog">
		<div class="modal-dialog configdialog">
			<div class="modal-content configdialog">
       <div class="modal-header">
           <label class="modal-title">Değiştirmek İstediğiniz Giriniz</label>
				</div>
        <div class="modal-body configbody">
          <input id="textValue"/>
        </div>
        <div class="modal-footer">
          <button type="button" id="saveTextValue" class="btn btn-success">Kaydet</button>
        </div>
			</div>
		</div>
	</div>
 <!-- End ChangeText Dialog -->
 
 <!-- Image Dialog -->
  <div class="modal" id="imagesConfigModal" role="dialog">
		<div class="modal-dialog imagedialog">
			<div class="modal-content imagedialog">
       <div class="modal-header">
           <label class="modal-title">Değiştirmek Resimleri Giriniz</label>
				</div>
        <div id="images" class="modal-body imagedialog">
          
        </div>
        <div class="modal-footer">
          <button type="button" id="saveImages" class="btn btn-success">Kaydet</button>
        </div>
			</div>
		</div>
	</div>
  <!-- End Image Dialog -->
  
<script>
$( document ).ready(function() {
  var currentGuid;
	animateText();
	setTimeout('removeAllItemClass()',1500);
  doubleClickFunctions();
  addSaveTextValue();
  addSaveImages();
});

var addSaveImages = function ()
{
  $("#saveImages").click(function()
  { 
    $("#right").empty();
     var images =[];
    $("#images img").each(function(e)
    { 
      images.push($("#images img")[e]);
       if(e==0)
      {
        images[e].setAttribute("class","right-image active");
      }
      else
      {
        images[e].setAttribute("class","right-image");
      }
      images[e].removeAttribute("style");
    });
     $("#right").append(images);

  });
}

var addSaveTextValue = function ()
{
  $("#saveTextValue").click(function()
  { 
    var matches = $("#textValue").val().match(/\d+/g);
    if(matches != null)
    {
      var splitText = $("#textValue").val().slice(0, -1).split(".");
      var splitTextHtml = ""+splitText[0]+".<span class='smalltext'>"+splitText[1]+"</span>&nbsp ₺";
      $("#"+currentGuid).html(splitTextHtml);
    }
    
    else
    {
      $("#"+currentGuid).text($("#textValue").val());
    }
    
    $("#textConfigModal").modal("hide");

    currentGuid="";
  })
}

function doubleClickFunctions()
{
  //Menu Itemleri Düzenleme İşlemi
  $(".drink,.header,.menuitemheader,.small,.smalltext").on('dblclick', function () {
   $("#textConfigModal").modal("show");
   currentGuid = createguid();
   $(this).attr("id",currentGuid);
   $("#textValue").val($(this).text());
  });
    
  //Background Resmi Düzenleme İşlemi
  $("#right_bottom_image").on('dblclick', function () {
     $("<input id='file' type='file'>").appendTo(this).focus();
      var fileInput = document.querySelector('#file');
      var img = document.getElementById("right_bottom_image");

      function previewImage(file) {
          var reader = new FileReader();
          reader.onload = (function(aImg) {
              return function(e) {
                  aImg.src = e.target.result;
                  $("#right_bottom_image").css("background","url("+aImg.src+")");
                  $("#right_bottom_image").css("background-repeat","no-repeat");
                  $("#right_bottom_image").css("background-size","contain");
                  $("#right_bottom_image").css("width","37%");
                  $("#right_bottom_image").css("height","37%");

                  };
          })(img);
          reader.readAsDataURL(file);
          $('#file').remove();
      }
      fileInput.addEventListener("change", handleFiles, false);
      function handleFiles() {
          var fileList = this.files; /* now you can work with the file list */
          previewImage(fileList[0]);
      }
  });
  //Resim Animasyonu Değiştirme
  $("#right").on('dblclick' ,function () {
    $("#imagesConfigModal").modal("show");
     
    var images =[];
    for (var i = 0 ; i<4; i++)
    {  
      images[i] = "<img class='dialogimages' src='../media/2_ekran_"+(i+1)+"_gorsel.jpg' style='width:250px;margin-left:20px' />";
      $("#images").append(images[i]);
    }
    
  });
  
  //Dialogta Açılan Resimleri Değiştirme
  $("#images").on('dblclick', function (e,el) {
     $("<input id='file' type='file'>").appendTo(this).focus();
      var fileInput = document.querySelector('#file');
      var img = e.target;
      function previewImage(file) {
          var reader = new FileReader();
          reader.onload = (function(aImg) {
              return function(e) {
                  aImg.src = e.target.result;
                  img.src=aImg.src;
                  
                  };
          })(img);
          reader.readAsDataURL(file);
          $('#file').remove();
      }
      fileInput.addEventListener("change", handleFiles, false);
      function handleFiles() {
          var fileList = this.files; /* now you can work with the file list */
          previewImage(fileList[0]);
      }
  });
}

function createguid() 
{
  function s4() {
    return Math.floor((1 + Math.random()) * 0x10000)
      .toString(16)
      .substring(1);
  }
  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
    s4() + '-' + s4() + s4() + s4();
}

function swapImages(){
  var $active = $('#right .active');
  var $next = ($('#right .active').next().length > 0) ? $('#right .active').next() : $('#right img:first');
  $active.fadeOut(function(){
    $active.removeClass('active');
    $next.fadeIn().addClass('active');
	var logger = new Logger();
	logger.log("Picture at screen 1: " + $next.attr("src"), $next.attr("src"));
  });
 
 animateText() ;	
}

function animateText(){
 
	$( ".menuitemheader" ).each(function( index,value ) {
 		$(this).addClass('marquee');
	});
	$( ".drink" ).each(function( index ) {
		$(this).addClass('marquee');
	});
	$( ".item" ).each(function( index ) {
		$(this).addClass('marquee');
	});
	$("p").addClass('marquee');
	setTimeout('removeAllItemClass()',2500);
}

function removeAllItemClass(){
		$( ".menuitemheader" ).each(function( index ) {
		$(this).attr("class","menuitemheader");		
		});
		$( ".drink" ).each(function( index ) {
		$(this).attr("class","drink");		
		});
		$( ".item" ).each(function( index ) {
			if($(this).hasClass("small")){
				$(this).attr("class","item small");			
			}
			if($(this).hasClass("large")){
				$(this).attr("class","item large");			
			}
		
		});
	 	$("p").attr("class","");	
}
// Run our swapImages() function every 5secs
setInterval('swapImages()', 60000);
</script>
</body>
</html>
